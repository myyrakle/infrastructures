alertmanager:
  config:
    global:
      slack_api_url: "https://slack.com/api/chat.postMessage"

    route:
      group_by: ["alertname", "cluster", "namespace"]
      group_wait: 10s # ì²« ì•Œë¦¼ ëŒ€ê¸°
      group_interval: 10s # ê·¸ë£¹ì— ìƒˆ ì•Œë¦¼ ì¶”ê°€ ëŒ€ê¸°
      repeat_interval: 12h # ê°™ì€ ì•Œë¦¼ ë°˜ë³µ ê°„ê²©
      receiver: "slack-critical"

      routes:
        # Critical ì•Œë¦¼
        - match:
            severity: critical
          receiver: "slack-critical"
          continue: true

        # Warning ì•Œë¦¼
        - match:
            severity: warning
          receiver: "slack-warnings"

    receivers:
      # Critical ì•Œë¦¼ (ì¦‰ì‹œ)
      - name: "slack-critical"
        slack_configs:
          - channel: "ì±„ë„ ID"
            title: '{{ if eq .Status "firing" }}ğŸ”´ Critical Alert{{ else }}âœ… Resolved: Critical Alert{{ end }}'
            text: |-
              <!here>
              {{ if eq .Status "resolved" }}*Status:* RESOLVED{{ end }}
              *Alert:* {{ .GroupLabels.alertname }}
              *Severity:* {{ .CommonLabels.severity }}
              *Summary:* {{ .CommonAnnotations.summary }}
              *Description:* {{ .CommonAnnotations.description }}
            send_resolved: true
            http_config:
              authorization:
                credentials: "SLACK í† í°"

      # Warning ì•Œë¦¼
      - name: "slack-warnings"
        slack_configs:
          - channel: "ì±„ë„ ID"
            title: '{{ if eq .Status "firing" }}âš ï¸ Warning{{ else }}âœ… Resolved: Warning{{ end }}'
            text: |-
              {{ if eq .Status "resolved" }}*Status:* RESOLVED{{ end }}
              *Alert:* {{ .GroupLabels.alertname }}
              *Namespace:* {{ .CommonLabels.namespace }}
              *Pod:* {{ .CommonLabels.pod }}
              *Description:* {{ .CommonAnnotations.description }}
            send_resolved: true
            http_config:
              authorization:
                credentials: "SLACK í† í°"
